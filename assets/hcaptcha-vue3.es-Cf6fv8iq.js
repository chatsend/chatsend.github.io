const P=t=>typeof t=="symbol";new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(P));function A(t){return N(t)?A(t.__v_raw):!!(t&&t.__v_isReactive)}function N(t){return!!(t&&t.__v_isReadonly)}function $(t){return A(t)||N(t)}function L(t){return!!(t&&t.__v_isRef===!0)}const K=[],M=/^on[^a-z]/,q=t=>M.test(t),O=Object.assign,f=Array.isArray,_=t=>typeof t=="function",u=t=>typeof t=="string",g=t=>t!==null&&typeof t=="object";let E;const k=()=>E||(E=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function x(t){if(f(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=u(s)?G(s):x(s);if(i)for(const o in i)e[o]=i[o]}return e}else{if(u(t))return t;if(g(t))return t}}const H=/;(?![^(]*\))/g,U=/:([^]+)/,Y=/\/\*[^]*?\*\//g;function G(t){const e={};return t.replace(Y,"").split(H).forEach(n=>{if(n){const s=n.split(U);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function I(t){let e="";if(u(t))e=t;else if(f(t))for(let n=0;n<t.length;n++){const s=I(t[n]);s&&(e+=s+" ")}else if(g(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}let h=null,Q=null;const W=t=>t.__isSuspense,J=Symbol.for("v-ndc"),X=t=>t.__isTeleport,T=Symbol.for("v-fgt"),Z=Symbol.for("v-txt"),v=Symbol.for("v-cmt"),p=[];let a=null;function tt(t=!1){p.push(a=t?null:[])}function et(){p.pop(),a=p[p.length-1]||null}function nt(t){return t.dynamicChildren=a||K,et(),a&&a.push(t),t}function st(t,e,n,s,i,o){return nt(j(t,e,n,s,i,o,!0))}function it(t){return t?t.__v_isVNode===!0:!1}const z="__vInternal",V=({key:t})=>t??null,m=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?u(t)||L(t)||_(t)?{i:h,r:t,k:e,f:!!n}:t:null);function j(t,e=null,n=null,s=0,i=null,o=t===T?0:1,c=!1,r=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&V(e),ref:e&&m(e),scopeId:Q,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:h};return r?(w(l,n),o&128&&t.normalize(l)):n&&(l.shapeFlag|=u(n)?8:16),!c&&a&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&a.push(l),l}const ot=rt;function rt(t,e=null,n=null,s=0,i=null,o=!1){if((!t||t===J)&&(t=v),it(t)){const r=b(t,e,!0);return n&&w(r,n),!o&&a&&(r.shapeFlag&6?a[a.indexOf(t)]=r:a.push(r)),r.patchFlag|=-2,r}if(dt(t)&&(t=t.__vccOpts),e){e=lt(e);let{class:r,style:l}=e;r&&!u(r)&&(e.class=I(r)),g(l)&&($(l)&&!f(l)&&(l=O({},l)),e.style=x(l))}const c=u(t)?1:W(t)?128:X(t)?64:g(t)?4:_(t)?2:0;return j(t,e,n,s,i,c,o,!0)}function lt(t){return t?$(t)||z in t?O({},t):t:null}function b(t,e,n=!1){const{props:s,ref:i,patchFlag:o,children:c}=t,r=e?at(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:r,key:r&&V(r),ref:e&&e.ref?n&&i?f(i)?i.concat(m(e)):[i,m(e)]:m(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==T?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&b(t.ssContent),ssFallback:t.ssFallback&&b(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ct(t=" ",e=0){return ot(Z,null,t,e)}function w(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(f(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),w(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(z in e)?e._ctx=h:i===3&&h&&(h.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _(e)?(e={default:e,_ctx:h},n=32):(e=String(e),s&64?(n=16,e=[ct(e)]):n=8);t.children=e,t.shapeFlag|=n}function at(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=I([e.class,s.class]));else if(i==="style")e.style=x([e.style,s.style]);else if(q(i)){const o=e[i],c=s[i];c&&o!==c&&!(f(o)&&o.includes(c))&&(e[i]=o?[].concat(o,c):c)}else i!==""&&(e[i]=s[i])}return e}let y,F="__VUE_INSTANCE_SETTERS__";(y=k()[F])||(y=k()[F]=[]),y.push(t=>t);function dt(t){return _(t)&&"__vccOpts"in t}const R="hcaptcha-api-script-id",B="_hcaptchaOnLoad";let S,D;const C=new Promise((t,e)=>{S=t,D=e});function ut(t){if(window.hcaptcha)return S(),C;if(document.getElementById(R))return C;window[B]=S;const e=ht(t),n=document.createElement("script");return n.id=R,n.src=e,n.async=!0,n.defer=!0,n.onerror=s=>{console.error("Failed to load api: "+e,s),D("Failed to load api.js")},document.head.appendChild(n),C}function ht(t){let e=t.apiEndpoint;return e=d(e,"render","explicit"),e=d(e,"onload",B),e=d(e,"recaptchacompat",t.reCaptchaCompat===!1?"off":null),e=d(e,"hl",t.language),e=d(e,"sentry",t.sentry),e=d(e,"custom",t.custom),e=d(e,"endpoint",t.endpoint),e=d(e,"assethost",t.assethost),e=d(e,"imghost",t.imghost),e=d(e,"reportapi",t.reportapi),e}function d(t,e,n){if(n!=null){const s=t.includes("?")?"&":"?";return t+s+e+"="+encodeURIComponent(n)}return t}var ft=(t,e)=>{for(const[n,s]of e)t[n]=s;return t};const pt={name:"VueHcaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String,default:void 0},size:{type:String,default:void 0},tabindex:{type:String,default:void 0},language:{type:String,default:void 0},reCaptchaCompat:{type:Boolean,default:!0},challengeContainer:{type:String,default:void 0},rqdata:{type:String,default:void 0},sentry:{type:Boolean,default:!0},custom:{type:Boolean,default:void 0},apiEndpoint:{type:String,default:"https://hcaptcha.com/1/api.js"},endpoint:{type:String,default:void 0},reportapi:{type:String,default:void 0},assethost:{type:String,default:void 0},imghost:{type:String,default:void 0}},data:()=>({widgetId:null,hcaptcha:null,renderedCb:null}),mounted(){return ut(this.$props).then(this.onApiLoaded).catch(this.onError)},unmounted(){this.teardown()},destroyed(){this.teardown()},methods:{teardown(){this.widgetId&&(this.hcaptcha.reset(this.widgetId),this.hcaptcha.remove(this.widgetId))},onApiLoaded(){this.hcaptcha=window.hcaptcha;const t={sitekey:this.sitekey,theme:this.theme,size:this.size,tabindex:this.tabindex,callback:this.onVerify,"expired-callback":this.onExpired,"chalexpired-callback":this.onChallengeExpired,"error-callback":this.onError,"open-callback":this.onOpen,"close-callback":this.onClose};this.challengeContainer&&(t["challenge-container"]=this.challengeContainer),this.widgetId=this.hcaptcha.render(this.$el,t),this.rqdata&&this.hcaptcha.setData(this.widgetId,{rqdata:this.rqdata}),this.onRendered()},execute(){this.widgetId?(this.hcaptcha.execute(this.widgetId),this.onExecuted()):this.renderedCb=()=>{this.renderedCb=null,this.execute()}},executeAsync(){if(this.widgetId)return this.onExecuted(),this.hcaptcha.execute(this.widgetId,{async:!0});let t;const e=new Promise(n=>{t=n});return this.renderedCb=()=>{this.renderedCb=null,t()},e.then(this.executeAsync)},reset(){this.widgetId?(this.hcaptcha.reset(this.widgetId),this.onReset()):this.$emit("error","Element is not rendered yet and thus cannot reset it. Wait for `rendered` event to safely call reset.")},onRendered(){this.$emit("rendered"),this.renderedCb&&this.renderedCb()},onExecuted(){this.$emit("executed")},onReset(){this.$emit("reset")},onError(t){this.$emit("error",t),this.reset()},onVerify(){const t=this.hcaptcha.getResponse(this.widgetId),e=this.hcaptcha.getRespKey(this.widgetId);this.$emit("verify",t,e)},onExpired(){this.$emit("expired")},onChallengeExpired(){this.$emit("challengeExpired")},onOpen(){this.$emit("opened")},onClose(){this.$emit("closed")}}},mt={id:"hcap-script"};function gt(t,e,n,s,i,o){return tt(),st("div",mt)}var _t=ft(pt,[["render",gt]]);export{_t as h};
